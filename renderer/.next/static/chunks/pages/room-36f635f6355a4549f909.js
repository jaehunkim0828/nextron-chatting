(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{6495:function(e,t,n){"use strict";n(7378);var r=n(4246);t.Z=function(e){var t=e.user,n=e.text,a=(e.me,{backgroundColor:t===localStorage.getItem("name")?"#B9D7EA":"#ECEFEF",borderRadius:t===localStorage.getItem("name")?"10px 10px 2px 10px":"10px 10px 10px 2px",margin:"0.4rem 0 0 0"});return(0,r.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:t===localStorage.getItem("name")?"flex-end":"flex-start",padding:"0 0 0.5rem 0"},children:[(0,r.jsx)("div",{children:t}),(0,r.jsx)("div",{style:a,className:"bubble",children:(0,r.jsx)("div",{children:n})})]})}},6470:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(5944),a=n(6952),s=n(8742),i=n.n(s),o=n(7378),c=n(4626),u=n(6495),l=n(1122),d=n(6677),m=n(7018),f=n(4246);var p=function(e){var t=e.setGroupChat,n=e.sent,s=(0,o.useState)([]),u=s[0],d=s[1],p=(0,o.useState)([]),h=p[0],g=p[1],x=(0,o.useState)(""),v=x[0],b=x[1],y=function(){t(!1)},w=function(){var e=(0,a.Z)(i().mark((function e(){var t,a,s,o,u,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],o=localStorage.getItem("name"),t.push(o),t.push.apply(t,(0,r.Z)(h).concat([n])),v){e.next=6;break}return e.abrupt("return",window.alert("\ubc29\uc774\ub984\uc744 \uc801\uc5b4\uc8fc\uc138\uc694"));case 6:return d=(u={name:v,crew:t}).crew.sort().toString(),f=(0,l.hJ)(c.db,"groupName"),e.next=11,(0,m.PL)(f);case 11:if(e.sent.forEach((function(e){var t,n=e.data();s=null===(t=n.crew)||void 0===t?void 0:t.sort().toString(),a=n.name})),a!==u.name||s!==d){e.next=17;break}return e.abrupt("return",window.alert("\uc774\ubbf8 \ubc29\uc774 \uc788\uc2b5\ub2c8\ub2e4."));case 17:return e.next=19,(0,l.ET)((0,l.hJ)(c.db,"groupName"),u);case 19:return window.alert("\ub9cc\ub4e4\uae30 \uc131\uacf5"),y(),e.abrupt("return");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)(i().mark((function e(){var t,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=localStorage.getItem("name"),e.next=4,(0,m.PL)((0,l.hJ)(c.db,"users"));case 4:e.sent.forEach((function(e){e.data().name!==r&&t.push(e.data().name)})),a=t.indexOf(n),t.splice(a,1),d(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){j()}),[]),(0,f.jsxs)("div",{className:"modal",children:[(0,f.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"},children:(0,f.jsx)("img",{onClick:y,src:"/images/no.png",alt:"close",style:{width:"2rem",cursor:"pointer"}})}),(0,f.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center"},children:[(0,f.jsx)("div",{style:{color:"gray",margin:"0 0.5rem 0 0",fontWeight:"700",fontSize:"1rem"},children:"\ubc29\uc774\ub984: "}),(0,f.jsx)("input",{style:{border:"none",backgroundColor:"white",borderRadius:"5px"},value:v,onChange:function(e){var t=e.target.value;b(t)}})]}),(0,f.jsx)("div",{className:"modal-lists",style:{overflow:"scroll",flex:"1"},children:u.map((function(e){return(0,f.jsxs)("div",{className:"modal-list",style:{display:"flex"},children:[(0,f.jsx)("input",{id:e,type:"checkbox",name:e,onChange:function(t){!function(e,t){var n=e.currentTarget.checked;g(n?[].concat((0,r.Z)(h),[t]):h.filter((function(e){return e!==t})))}(t,e)}}),(0,f.jsx)("div",{children:e})]})}))}),(0,f.jsx)("div",{className:"modal-button",children:(0,f.jsx)("button",{onClick:w,style:{cursor:"pointer"},children:"\ucd08\ub300\ud558\uae30"})})]})};var h=function(){var e=(0,o.useState)([]),t=e[0],n=e[1],s=(0,o.useState)(""),m=s[0],h=s[1],g=(0,o.useState)(!1),x=g[0],v=g[1],b=(0,o.useState)(""),y=b[0],w=b[1],j=function(){var e=(0,a.Z)(i().mark((function e(a){var s,o,u,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),s=localStorage.getItem("name"),o=localStorage.getItem("sent"),u=(new Date).getTime(),n([d={user:s,time:u,text:m,sent:o}].concat((0,r.Z)(t))),f=(0,l.hJ)(c.db,"messages"),e.next=9,(0,l.ET)(f,d);case 9:h("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){if(!localStorage.getItem("token"))return window.alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694."),void d.default.push("/home");(function(){var e=(0,a.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,l.hJ)(c.db,"messages"),r=(0,l.IO)(t,(0,l.Xo)("time","desc")),(0,l.cf)(r,(function(e){var t=[],r=localStorage.getItem("name"),a=localStorage.getItem("sent");w(a),e.forEach((function(e){e.data().user===r&&e.data().sent===a&&t.push(e.data()),e.data().user===a&&e.data().sent===r&&t.push(e.data())})),n(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),(0,f.jsxs)("div",{className:"main",children:[(0,f.jsxs)("nav",{children:[(0,f.jsx)("img",{src:"/images/smallLogo.png",alt:"nav-logo"}),(0,f.jsx)("button",{className:"sign-out",onClick:function(){localStorage.clear(),d.default.push("/home")},children:"Sign Out"})]}),(0,f.jsxs)("form",{onSubmit:j,className:"room-main-container",children:[(0,f.jsxs)("div",{className:"room-nav",children:[(0,f.jsx)("img",{onClick:function(){return d.default.push("/main")},src:"/images/back.png",alt:"back",style:{width:"2rem",height:"2rem",cursor:"pointer"}}),(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{src:"/images/main-rabbit.png",alt:"rabbit",style:{width:"3rem",height:"2rem"}}),(0,f.jsx)("div",{children:y})]}),(0,f.jsx)("img",{onClick:function(){v(!0)},src:"/images/plus.png",alt:"plus",style:{cursor:"pointer"}})]}),(0,f.jsx)("div",{className:"room-main",children:t.map((function(e){var t=e.user,n=e.text;return(0,f.jsx)(u.Z,{user:t,text:n,me:t===localStorage.getItem("name")})}))}),(0,f.jsxs)("div",{style:{display:"flex"},children:[(0,f.jsx)("input",{className:"input-text",onChange:function(e){var t=e.target.value;h(t)},value:m}),(0,f.jsx)("button",{className:"button-text",type:"submit",children:"\ubcf4\ub0b4\uae30"})]})]}),x&&(0,f.jsx)(p,{sent:y,setGroupChat:v})]})}},4626:function(e,t,n){"use strict";n.d(t,{db:function(){return o},I:function(){return c}});var r=n(2671),a=n(6439),s=n(7018);var i=function(e){try{return(0,r.Mq)()}catch(t){return(0,r.ZF)(e)}}({apiKey:"AIzaSyBi0xT-wcmJwlW5LTdw5lGUwwTgjdqwqWk",authDomain:"chatting-app-35460.firebaseapp.com",projectId:"chatting-app-35460",storageBucket:"chatting-app-35460.appspot.com",messagingSenderId:"772140384040",appId:"1:772140384040:web:4a8a69e70f8be2af5a1a1d",measurementId:"G-LQ4MXPXYFT"}),o=(0,s.ad)(i),c=(0,a.v0)(i)},3933:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/room",function(){return n(6470)}])},5944:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return a}})}},function(e){e.O(0,[501,119,829,774,888,179],(function(){return t=3933,e(e.s=t);var t}));var t=e.O();_N_E=t}]);